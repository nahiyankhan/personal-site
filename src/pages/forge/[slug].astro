---
import { getCollection, type CollectionEntry } from "astro:content";
import ForgeLayout from "@/layouts/ForgeLayout.astro";
import ForgeDemo from "@/components/forge/ForgeDemo.astro";

export async function getStaticPaths() {
	const items = await getCollection("forge", ({ data }) => !data.draft);
	return items.map((item) => ({
		params: { slug: item.slug },
		props: { item },
	}));
}

interface Props {
	item: CollectionEntry<"forge">;
}

const { item } = Astro.props;
const { Content } = await item.render();
const { title, description, demoHeight, demoStyle } = item.data;
---

<ForgeLayout
	meta={{ title, description }}
	title={title}
	demoHeight={demoHeight}
	demoStyle={demoStyle}
>
	<ForgeDemo slot="demo" slug={item.slug} />

	<article class="forge-content">
		<Content />
	</article>
</ForgeLayout>

<style>
	.forge-content {
		color: hsl(var(--theme-text));
	}

	.forge-content :global(h2) {
		font-size: 1.5rem;
		font-weight: 700;
		margin-top: 2rem;
		margin-bottom: 1rem;
	}

	.forge-content :global(h2:first-child) {
		margin-top: 0;
	}

	.forge-content :global(h3) {
		font-size: 1.25rem;
		font-weight: 600;
		margin-top: 1.5rem;
		margin-bottom: 0.75rem;
	}

	.forge-content :global(p) {
		margin-bottom: 1rem;
		line-height: 1.75;
	}

	.forge-content :global(ul) {
		margin-bottom: 1rem;
		padding-left: 1.5rem;
		list-style-type: disc;
	}

	.forge-content :global(li) {
		margin-bottom: 0.5rem;
		line-height: 1.75;
	}

	.forge-content :global(strong) {
		font-weight: 600;
	}
</style>

